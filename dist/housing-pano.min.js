!function(t){function o(i){if(n[i])return n[i].exports;var e=n[i]={exports:{},id:i,loaded:!1};return t[i].call(e.exports,e,e.exports,o),e.loaded=!0,e.exports}var n={};return o.m=t,o.c=n,o.p="",o(0)}([function(t,o,n){(function(){var t,o;o=void 0,t=void 0,DirectPano.show_pano=function(){var i;o=n(1),i=$("#"+DirectPano.image_div_id),i.css({visibility:"visible"}),o.Annotation=new o.annotation(DirectPano.annotation_angles),o.Annotation.add_annotations(0),o.scene.children.length=0,o.add_listeners(),o.Hotspot=new o.hotspot(DirectPano.hotspots_angle),o.Transition=new o.transition(DirectPano.pano,DirectPano.hotspots_angle),o.Hotspot.add_hotspots(0),t=new o.animation},DirectPano.remove_pano=function(){t.destroy=!0,t=null,o.remove_listeners(),o.Hotspot.destroy_hotspot(),o.Hotspot=null,o.Transition.destroy_transition(),o.Transition=null,o.Annotation.destroy_annotation(),o.Annotation=null,o.destroy()}}).call(this)},function(t,o,n){(function(){var o,i,e,a,r,s,l,h,p,d,c,u,_,f;_=n(2),a=void 0,r=void 0,e=void 0,i=void 0,f=function(t){var o,n,i,e;switch(i=t.changedTouches,o=i[0],e="",t.type){case"touchstart":e="mousedown";break;case"touchmove":e="mousemove";break;case"touchend":e="mouseup";break;default:return}n=document.createEvent("MouseEvent"),n.initMouseEvent(e,!0,!0,window,1,o.screenX,o.screenY,o.clientX,o.clientY,!1,!1,!1,!1,0,null),o.target.dispatchEvent(n),t.preventDefault()},h=function(t){var o,n,s;t.preventDefault(),_.Config.current_lon=_.Config.lon,_.Config.target_lon=_.Config.lon,_.Config.current_lat=_.Config.lat,_.Config.target_lat=_.Config.lat,_.Config.isUserInteracting=!0,a=t.clientX,r=t.clientY,e=_.Config.lon,i=_.Config.lat,s=new THREE.Vector3,o=$("#"+DirectPano.pano_div_id),s.set(t.clientX/o.outerWidth()*2-1,2*-(t.clientY/o.outerHeight())+1,.5),s.unproject(_.camera),_.raycaster.set(_.camera.position,s.sub(_.camera.position).normalize()),n=_.raycaster.intersectObjects(_.scene.children,!0),n.length>0&&"hotspot"===n[0].object.name&&_.Transition.start(n[0].object.hotspot_id)},p=function(t){var o;_.Config.isUserInteracting===!0&&(o=.3,_.Config.target_lon=(a-t.clientX)*o+e,_.Config.target_lat=(t.clientY-r)*o+i)},d=function(t){_.Config.isUserInteracting=!1,_.Config.stop_time=Date.now(),_.Config.autoplay=!1},c=function(t){t.wheelDeltaY?_.camera.fov-=.05*t.wheelDeltaY:t.wheelDelta?_.camera.fov-=.05*t.wheelDelta:t.detail&&(_.camera.fov+=1*t.detail),_.camera.fov=Math.max(60,Math.min(90,_.camera.fov)),_.camera.updateProjectionMatrix()},s=function(t){var o,n,i;i=void 0,t||(t=window.event),_.Config.isUserInteracting=!0,n=t.keyCode,37===n?(_.Config.current_lon=_.Config.lon,_.Config.target_lon=_.Config.lon-20):39===n?(_.Config.current_lon=_.Config.lon,_.Config.target_lon=_.Config.lon+20):38===n?_.Transition.moving===!1&&(i=_.Hotspot.front_nearest_hotspot(_.Transition.current_pano),-1!==i&&_.Transition.start(i)):40===n?_.Transition.moving===!1&&(i=_.Hotspot.back_nearest_hotspot(_.Transition.current_pano),-1!==i&&_.Transition.start(i)):27===n&&(o=$("#"+DirectPano.pano_div_id),o.width()===window.innerWidth&&o.height()===window.innerHeight&&_.escape_fullscreen())},l=function(t){_.Config.isUserInteracting=!1,_.Config.stop_time=Date.now(),_.Config.autoplay=!1},o=function(){return $("#"+DirectPano.pano_div_id).on({click:function(t){$("#"+DirectPano.pano_div_id).focus()},mousedown:function(t){h(t)},mousemove:function(t){p(t)},mouseup:function(t){d(t)},mousewheel:function(t){c(t.originalEvent)},DOMMouseScroll:function(t){c(t.originalEvent)},touchstart:function(t){f(t.originalEvent)},touchmove:function(t){f(t.originalEvent)},touchend:function(t){f(t.originalEvent)},keydown:function(t){s(t)},keyup:function(t){l(t)}})},u=function(){$("#"+DirectPano.pano_div_id).off()},_.add_listeners=o,_.remove_listeners=u,t.exports=_}).call(this)},function(t,o,n){(function(){var o,i;o=n(3),i=function(){function t(t,n){var i;this.pano=t,this.current_pano=0,this.moving=!1,this.hotspot_angles=n,this.destroy=!1,o.clear_images={},o.blur_images={},o.clear_images[this.current_pano]=[],i=this.pano[this.current_pano][1]+"mobile_",this.blur_pano=new o.Pano(0,!0),this.clear_pano=new o.Pano(0,!1),this.blur_pano.create_pano(i,0),this.clear_pano.create_pano(i,1),this.preload_images()}return t.prototype.save_clear_images=function(){var t,n,i,e;if(t=this.current_pano,i=this.pano,!o.clear_images[t])for(e=i[t][1]+"mobile_",o.clear_images[t]=[],n=0;6>n;)!function(){var i,a,r;for(r=new THREE.Texture(o.texture_placeholder),i=n,o.clear_images[t][i]={},a=0;4>a;)!function(){var s,l;l=a,s=new Image,s.onload=function(){s.onload=null,r.image=this,r.needsUpdate=!0,o.clear_images[t][i][l]=s},s.src=e+o.Config.img_name[n]+"/"+a+".jpg"}(),a++}(),n++},t.prototype.preload_images=function(){var t,n,i,e;for(i=0,t=this.current_pano,n=this.hotspot_angles,e=this.pano;i<n[t].length;)!function(){var a,r,s;if(s=n[t][i][0],!o.blur_images[s])for(o.blur_images[s]=[],a=e[s][1]+"../blur_"+(s+1)+"/mobile_",r=0;6>r;)!function(){var t,n,i;for(i=new THREE.Texture(o.texture_placeholder),t=r,o.blur_images[s][t]={},n=0;4>n;)!function(){var e,l;l=n,e=new Image,e.onload=function(){e.onload=null,i.image=this,i.needsUpdate=!0,o.blur_images[s][t][l]=e},e.src=a+o.Config.img_name[r]+"/"+n+".jpg"}(),n++}(),r++}(),i++},t.prototype.start=function(t){var n,i,e,a,r,s;n=this.current_pano,r=this.hotspot_angles[n][t][0],e=this.hotspot_angles[n][t][1],i=this.hotspot_angles[n][t][2],this.moving=!0,this.current_pano=r,this.save_clear_images(),s=this.find_rotation_angle(e),o.Hotspot.remove_hotspots(),o.Annotation.remove_annotations(),a=this.old_pano_to_blur_pano.bind(this),this.preload_images(),this.load_blur_pano(i,e).done(function(){a(i,e,s)})},t.prototype.find_rotation_angle=function(t){var n;for(n=t-o.Config.lon;n>180;)n-=360;for(;-180>n;)n+=360;return n>50?n=(n-180)%360:-50>n&&(n=(n+180)%360),n+=o.Config.lon},t.prototype.load_blur_pano=function(t,n){var i,e,a,r,s;if(this.destroy)return $.when().done(function(){}).promise();for(s=this.pano[this.current_pano][1]+"../blur_"+(this.current_pano+1)+"/mobile_",i=[],e=60,a=0;24>a;)i[a]=$.Deferred(),a++;for(this.blur_pano.pano_id=this.current_pano,a=0;6>a;){for(r=0;4>r;)this.blur_pano.mesh.children[a].children[r].material.map.dispose(),this.blur_pano.mesh.children[a].children[r].material.map=this.blur_pano.get_texture(this.pano_id,s+o.Config.img_name[a]+"/"+r+".jpg",i[4*a+r],a,r),this.blur_pano.mesh.children[a].children[r].material.opacity=0,r++;a++}return this.blur_pano.mesh.rotation.y=THREE.Math.degToRad(t),this.blur_pano.mesh.position.x=e*Math.cos(THREE.Math.degToRad(n)),this.blur_pano.mesh.position.z=e*Math.sin(THREE.Math.degToRad(n)),$.when.apply($,i).done(function(){}).promise()},t.prototype.load_clear_pano=function(t){var n,i,e,a;if(this.destroy)return $.when().done(function(){}).promise();for(a=this.pano[this.current_pano][1]+"mobile_",n=[],i=0;24>i;)n[i]=$.Deferred(),i++;for(this.clear_pano.pano_id=this.current_pano,this.clear_pano.mesh.rotation.y=THREE.Math.degToRad(t),i=0;6>i;){for(e=0;4>e;)this.clear_pano.mesh.children[i].children[e].material.map.dispose(),this.clear_pano.mesh.children[i].children[e].material.map=this.clear_pano.get_texture(this.pano_id,a+o.Config.img_name[i]+"/"+e+".jpg",n[4*i+e],i,e),this.clear_pano.mesh.children[i].children[e].material.opacity=0,e++;i++}return $.when.apply($,n).done(function(){}).promise()},t.prototype.old_pano_to_blur_pano=function(t,n,i){var e,a,r,s,l,h,p,d;if(!this.destroy){for(d=.4,TweenLite.to(o.Config,d,{lon:i,lat:0,ease:Power0.easeOut}),p=2,r=.3,e=this.blur_pano,a=this.clear_pano,TweenLite.to(e.mesh.position,p,{x:0,z:0,delay:r,ease:Expo.easeOut}),l=0;6>l;){for(h=0;4>h;)TweenLite.to(a.mesh.children[l].children[h].material,p,{opacity:0,delay:r,ease:Expo.easeOut}),TweenLite.to(e.mesh.children[l].children[h].material,p,{opacity:1,delay:r,ease:Expo.easeOut}),h++;l++}s=60,TweenLite.to(a.mesh.position,p,{x:-1*s*Math.cos(THREE.Math.degToRad(n)),z:-1*s*Math.sin(THREE.Math.degToRad(n)),delay:r,ease:Expo.easeOut,onComplete:this.check_new_pano_load.bind(this),onCompleteParams:[t]})}},t.prototype.check_new_pano_load=function(t){var o,n,i;if(!this.destroy){for(this.clear_pano.mesh.position.x=0,this.clear_pano.mesh.position.z=0,n=0;6>n;){for(i=0;4>i;)this.clear_pano.mesh.children[n].children[i].material.opacity=0,this.clear_pano.mesh.children[n].children[i].material.map.dispose(),this.blur_pano.mesh.children[n].children[i].material.opacity=1,i++;n++}o=this.blur_pano_to_new_pano.bind(this),this.load_clear_pano(t).done(function(){o(t)})}},t.prototype.blur_pano_to_new_pano=function(t){var o,n,i,e,a;if(!this.destroy){for(o=this.blur_pano,n=this.clear_pano,a=.5,i=0;6>i;){for(e=0;4>e;)TweenLite.to(o.mesh.children[i].children[e].material,a,{opacity:0,ease:Power0.easeOut}),e++;i++}for(i=0;6>i;){for(e=0;4>e;)5===i&&3===e?TweenLite.to(n.mesh.children[i].children[e].material,a,{opacity:1,ease:Power0.easeOut,onComplete:this.complete.bind(this),onCompleteParams:[t]}):TweenLite.to(n.mesh.children[i].children[e].material,a,{opacity:1,ease:Power0.easeOut}),e++;i++}}},t.prototype.alter_moving=function(){return this.moving=!1},t.prototype.complete=function(t){var n,i;this.destroy||(this.clear_pano.mesh.rotation.y=0,o.Config.lon+=t,i=this.current_pano,n=this.alter_moving.bind(this),o.Hotspot.add_hotspots(i).done(function(){o.Annotation.add_annotations(i),n()}))},t.prototype.destroy_transition=function(){var t,o;this.destroy=!0,t=this.blur_pano,o=this.clear_pano,TweenLite.killTweensOf(t),TweenLite.killTweensOf(o),this.blur_pano.destroy_pano(),this.clear_pano.destroy_pano(),this.blur_pano=null,this.clear_pano=null},t}(),o.transition=i,t.exports=o}).call(this)},function(t,o,n){(function(){var o,i,e;e=n(4),i=void 0,o=function(){function t(t,o){this.annotation_angles=t,this.content=o,this.panoid=void 0,this.length=0,this.destroy=!1}return t.prototype.add_annotation=function(t){var o,n;o=t,t="annotation_"+t,n=$("<div></div>",{id:t}),n.prepend("<img class='annotation' height='40px' width='40px' src='../test/images/info.png'></img> <div class='hotspot-title'> <div class='hotspot-text'>"+this.annotation_angles[this.panoid][o][2]+"</div> </div> <div class='info-hotspot'>"+this.annotation_angles[this.panoid][o][3]+"</div>"),$("#"+DirectPano.pano_div_id).append(n),$("#"+t).bind("click touchstart",function(){"visible"===$("#"+t).find(".info-hotspot").css("visibility")?($("#"+t).find(".info-hotspot").css("visibility","hidden"),$("#"+t).find(".hotspot-title").css("visibility","hidden"),$("#"+t).find(".hotspot-title").css("opacity","0"),$("#"+t).find(".annotation").css("border-radius","100px")):($("#"+t).find(".info-hotspot").css("visibility","visible"),$("#"+t).find(".hotspot-title").css("visibility","visible"),$("#"+t).find(".hotspot-title").css("opacity","1"),$("#"+t).find(".hotspot-title").css("border-radius","0px 10px 0px 0px"),$("#"+t).find(".annotation").css("border-radius","10px 0px 0px 0px"))}),$("#"+t).hover(function(){$("#"+t).find(".hotspot-title").css("visibility","visible"),$("#"+t).find(".hotspot-title").css("opacity","1"),"hidden"===$("#"+t).find(".info-hotspot").css("visibility")&&($("#"+t).find(".hotspot-title").css("border-radius","0px 10px 10px 0px"),$("#"+t).find(".annotation").css("border-radius","10px 0px 0px 10px"))},function(){"hidden"===$("#"+t).find(".info-hotspot").css("visibility")&&($("#"+t).find(".hotspot-title").css("visibility","hidden"),$("#"+t).find(".hotspot-title").css("opacity","0"),$("#"+t).find(".annotation").css("border-radius","100px"))})},t.prototype.add_annotations=function(t){var o;this.panoid=t;try{for(this.length=this.annotation_angles[t].length,o=0;o<this.length;){if(this.destroy)return void this.remove_annotations();this.add_annotation(o),o++}}catch(n){return void(this.length=0)}},t.prototype.remove_annotations=function(){var t;for(t=0;t<this.length;)$("#annotation_"+t).remove(),t++},t.prototype.destroy_annotation=function(){return this.destroy=!0,this.remove_annotations()},t.prototype.update=function(){var o,n,i,a,r,s,l,h;for(a=0,r=this.panoid;a<this.length;)n="#annotation_"+a,t=$(n),o=this.annotation_angles[r][a][0],l=THREE.Math.degToRad(o),h=new THREE.Vector3(30*Math.cos(l),this.annotation_angles[this.panoid][a][1],30*Math.sin(l)),h.x+=13*Math.cos(l),h.z+=13*Math.sin(l),h=h.project(e.camera),i=$("#"+DirectPano.pano_div_id),s={x:(h.x+1)/2*i.outerWidth(),y:-(h.y-1)/2*i.outerHeight()},t&&(h.x>1||h.x<-1||h.y>1||h.y<-1||h.z>1||h.z<-1?"none"!==$(n).css("display")&&($(n).removeAttr("style"),$(n).css("display","none")):($(n).css("display","inline"),$(n).css("left","-10px"),$(n).css("top","0px"),$(n).css("transform","translate3d("+s.x+"px,"+s.y+"px,0px)"),$(n).css("position","absolute"),$(n).css({"font-family":"'Helvetica Neue', Helvetica, Arial, sans-serif"}),$(n).css("font-size","16px"))),a++},t}(),e.annotation=o,t.exports=e}).call(this)},function(t,o,n){(function(){var o,i;i=n(5),o=function(){function t(t){this.panoid=void 0,this.hotspot_angles=t,this.destroy=!1}return t.prototype.load_texture=function(){var t,o,n;return n=new THREE.Texture(window.texture_placeholder),o=new THREE.MeshBasicMaterial({map:n,overdraw:0,side:THREE.DoubleSide,depthTest:!1,depthWrite:!0,opacity:1,transparent:!0}),t=new Image,t.onload=function(){return t.onload=null,n.image=this,n.needsUpdate=!0},t.src="../test/images/logo.png",o},t.prototype.add_hotspot=function(o,n,e,a){var r,s,l,h,p,d,c,u;s=new THREE.PlaneBufferGeometry(10,10,10),l=this.load_texture(),t=new THREE.Mesh(s,l),p=THREE.Math.degToRad(o),t.position.x=60*Math.cos(p),t.position.y=-50,t.position.z=60*Math.sin(p),t.renderOrder=1,u=new THREE.Vector3(-t.position.x,400,-t.position.z),t.lookAt(u),s=new THREE.PlaneBufferGeometry(1,1,1),h=this.panoid,c="",void 0!==this.hotspot_angles[h][e][3]&&(c=this.hotspot_angles[h][e][3]),t.panoid=this.hotspot_angles[h][e][0],t.deg_angle=o,r=$("#"+DirectPano.pano_div_id),d=$("<div></div>",{id:"hotspot_"+this.hotspot_angles[h][e][0]}),d.html(c),$("#"+DirectPano.pano_div_id).append(d),t.hotspot_id=e,t.name="hotspot",i.scene.add(t),a.resolve()},t.prototype.add_hotspots=function(t){var o,n,i;for(this.panoid=t,i=this.hotspot_angles[t].length,o=[],n=0;i>n;)o[n]=$.Deferred(),n++;for(n=0;i>n;){if(this.destroy)return void this.remove_hotspots();this.add_hotspot(this.hotspot_angles[t][n][1],this.hotspot_angles[t][n][2],n,o[n]),n++}return $.when.apply($,o).done(function(){}).promise()},t.prototype.remove_hotspots=function(){var t,o,n,e;for(o=i.scene.children.length,e=0,t=0;o>t;)n=i.scene.children[e],"hotspot"===n.name?(n.geometry.dispose(),n.material.dispose(),i.scene.remove(n),$("#hotspot_"+n.panoid).remove()):e+=1,t++},t.prototype.front_nearest_hotspot=function(t){var o,n,e,a,r,s,l;for(s=this.hotspot_angles[t].length,r=-1,a=void 0,o=!1,n=0;s>n;)l=this.hotspot_angles[t][n][1],e=(i.Config.lon+360)%360,0>l&&(l+=360),(e>=45&&315>=e&&(e+45)%360>=l&&l>=(e-45+360)%360||45>=e&&l>=0&&e+45>=l||45>=e&&l>=(e-45+360)%360&&360>=l||e>=315&&l>=e-45&&360>=l||e>=315&&l>=0&&(e+45)%360>=l)&&(o===!1||Math.abs(l-e)<Math.abs(a-e))&&(a=l,r=n,o=!0),n++;return r},t.prototype.back_nearest_hotspot=function(t){var o,n,e,a,r,s,l;for(s=this.hotspot_angles[t].length,r=-1,a=void 0,o=!1,n=0;s>n;)l=this.hotspot_angles[t][n][1],e=(i.Config.lon+360+180)%360,0>l&&(l+=360),(e>=45&&315>=e&&(e+45)%360>=l&&l>=(e-45+360)%360||45>=e&&l>=0&&e+45>=l||45>=e&&l>=(e-45+360)%360&&360>=l||e>=315&&l>=e-45&&360>=l||e>=315&&l>=0&&(e+45)%360>=l)&&(o===!1||Math.abs(l-e)<Math.abs(a-e))&&(a=l,r=n,o=!0),n++;return r},t.prototype.destroy_hotspot=function(){return this.destroy=!0,this.remove_hotspots()},t.prototype.update=function(){var t,o,n,e,a,r,s,l;for(n=i.scene.children.length,o=0;n>o;)e=i.scene.children[o],"hotspot"===e.name&&(s=$("#hotspot_"+e.panoid),l=e.position.clone(),r=THREE.Math.degToRad(e.deg_angle+5),l.x+=13*Math.cos(r),l.z+=13*Math.sin(r),l=l.project(i.camera),t=$("#"+DirectPano.pano_div_id),a={x:(l.x+1)/2*t.outerWidth(),y:-(l.y-1)/2*t.outerHeight()},s&&(l.x>1||l.x<-1||l.y>1||l.y<-1||l.z>1||l.z<-1?"none"!==$("#hotspot_"+e.panoid).css("display")&&($("#hotspot_"+e.panoid).removeAttr("style"),$("#hotspot_"+e.panoid).css({display:"none"})):$("#hotspot_"+e.panoid).css({display:"block",left:"-10px",top:"0px",transform:"translate3d("+a.x+"px,"+a.y+"px,0px)","text-align":"left",color:"Yellow",position:"absolute","margin-left":"-20px"}))),o++},t}(),i.hotspot=o,t.exports=i}).call(this)},function(t,o,n){(function(){var o,i,e,a,r;a=n(6),e=[{position:[-75,75,0]},{position:[75,75,0]},{position:[-75,-75,0]},{position:[75,-75,0]}],i=150,r=[{position:[-1*i,0,0],rotation:[0,Math.PI/2,0]},{position:[i,0,0],rotation:[0,-Math.PI/2,0]},{position:[0,i,0],rotation:[Math.PI/2,0,Math.PI]},{position:[0,-1*i,0],rotation:[-Math.PI/2,0,Math.PI]},{position:[0,0,i],rotation:[0,Math.PI,0]},{position:[0,0,-1*i],rotation:[0,0,0]}],o=function(){function t(t,o){this.pano_id=t,this.is_blur=o,this.name="panorama",this.destroy=!1}return t.prototype.create_pano=function(t,o){var n,i,s,l,h,p;for(this.mesh=new THREE.Object3D,i=0;6>i;){for(s=0,p=new THREE.Object3D,a.clear_images[this.pano_id][i]={};4>s;)l=this.load_texture(t+a.Config.img_name[i]+"/"+s+".jpg",i,s),n=a.Config.webgl?new THREE.PlaneBufferGeometry(150,150,7,7):new THREE.PlaneGeometry(150,150,20,20),h=new THREE.Mesh(n,l),h.material.transparent=!0,h.material.opacity=o,h.position.x=e[s].position[0],h.position.y=e[s].position[1],h.position.z=e[s].position[2],p.add(h),s++;p.rotation.x=r[i].rotation[0],p.rotation.y=r[i].rotation[1],p.rotation.z=r[i].rotation[2],p.updateMatrix(),p.position.x=r[i].position[0],p.position.y=r[i].position[1],p.position.z=r[i].position[2],p.updateMatrix(),this.mesh.add(p),i++}a.scene.add(this.mesh)},t.prototype.destroy_pano=function(){var t,o,n;for(this.destroy=!0,a.scene.remove(this.mesh),t=0,n=[];6>t;){for(o=0;4>o;)this.mesh.children[t].children[o].material.map.dispose(),this.mesh.children[t].children[o].material.dispose(),this.mesh.children[t].children[o].geometry.dispose(),this.mesh.children[t].children[o]=null,o++;this.mesh.children[t]=null,n.push(t++)}return n},t.prototype.load_texture=function(t,o,n){var i,e,r,s;return s=new THREE.Texture(a.texture_placeholder),e=new THREE.MeshBasicMaterial({map:s,overdraw:0,side:THREE.DoubleSide,blending:THREE.AdditiveBlending,depthTest:!1}),r=this.pano_id,i=new Image,i.onload=function(){i.onload=null,s.image=this,s.needsUpdate=!0,a.clear_images[r][o][n]=i},i.src=t,e},t.prototype.get_texture=function(t,o,n,i,e){var r,s,l;return r=!1,l=new THREE.Texture(a.texture_placeholder),t=this.pano_id,a.clear_images[t][i][e]?(r=!0,l.image=a.clear_images[t][i][e],l.needsUpdate=!0,n.resolve(),l):this.is_blur===!0&&a.blur_images[t][i][e]?(r=!0,l.image=a.blur_images[t][i][e],l.needsUpdate=!0,n.resolve(),l):(s=new Image,s.onload=function(){l.image=this,l.needsUpdate=!0,n.resolve()},s.src=o,l)},t}(),a.Pano=o,t.exports=a}).call(this)},function(t,o,n){(function(){var o,i,e,a,r;a=n(7),r=void 0,e=void 0,i=!1,o=function(){function t(){this.destroy=!1,this.animate()}return t.prototype.animate=function(){var t;this.destroy||(requestAnimationFrame(this.animate.bind(this)),this.update(),a.Hotspot.update(),a.Annotation.update(),void 0!==a.Config.target_lon&&void 0!==a.Config.current_lon&&Math.abs(a.Config.target_lon-a.Config.current_lon)>.1&&(a.Transition.moving===!0?(void 0===a.Config.target_lon,a.Config.current_lon=void 0):(a.Config.current_lon=a.Config.current_lon+.15*(a.Config.target_lon-a.Config.current_lon),a.Config.lon=(a.Config.current_lon+360)%360)),void 0!==a.Config.target_lat&&void 0!==a.Config.current_lat&&Math.abs(a.Config.target_lat-a.Config.current_lat)>.1&&(a.Transition.moving===!0?(a.Config.target_lat=void 0,a.Config.current_lat=void 0):(a.Config.current_lat=a.Config.current_lat+.15*(a.Config.target_lat-a.Config.current_lat),a.Config.lat=a.Config.current_lat)),i===!0&&(a.Config.isUserInteracting===!0?i=!1:(t=Date.now()-r,1e3>t?a.Config.lat=e-e*t/1e3:(i=!1,a.Config.lat=0))))},t.prototype.update=function(){var t,o,n;a.Config.isUserInteracting===!1&&a.Config.autoplay===!0?a.Config.lon+=.2:a.Config.isUserInteracting===!1&&(t=Date.now()-a.Config.stop_time,t>2e3&&(a.Config.autoplay=!0,i=!0,r=Date.now(),e=a.Config.lat)),a.Config.lon=(a.Config.lon+360)%360,a.Config.lat=Math.max(-35,Math.min(35,a.Config.lat)),o=THREE.Math.degToRad(90-a.Config.lat),n=THREE.Math.degToRad(a.Config.lon),a.camera.target.x=500*Math.sin(o)*Math.cos(n),a.camera.target.y=500*Math.cos(o),a.camera.target.z=500*Math.sin(o)*Math.sin(n),a.camera.lookAt(a.camera.target),a.renderer.render(a.scene,a.camera)},t}(),a.animation=o,t.exports=a}).call(this)},function(t,o){(function(){var o,n,i,e,a,r,s,l,h,p,d,c,u,_,f,g;_={},e=void 0,f=void 0,u=void 0,g=void 0,c=new THREE.Raycaster,i={},a={},n=void 0,d=!1,o={img_name:["r","l","u","d","f","b"],isUserInteracting:!1,lon:0,lat:0,stop_time:void 0,autoplay:!0,webgl:!0,current_lon:void 0,target_lon:void 0,current_lat:void 0,target_lat:void 0},h=function(){var t,o;t=$("#"+DirectPano.pano_div_id),t.width(window.innerWidth+"px").height(window.innerHeight+"px"),u.setSize(t.outerWidth(),t.outerHeight()),o=$("#"+DirectPano.image_div_id),o.css({visibility:"hidden"}),e.aspect=t.outerWidth()/t.outerHeight(),e.updateProjectionMatrix(),d=!0},l=function(){var t,o;t=$("#"+DirectPano.pano_div_id),t.width(DirectPano.initial_width+"px").height(DirectPano.initial_height+"px"),u.setSize(t.outerWidth(),t.outerHeight()),o=$("#"+DirectPano.image_div_id),o.css({visibility:"visible"}),e.aspect=t.outerWidth()/t.outerHeight(),e.updateProjectionMatrix(),d=!1},s=function(){var t,n;try{return t=$("<canvas/>"),!(!window.WebGLRenderingContext||!t[0].getContext("webgl")&&!t[0].getContext("experimental-webgl"))}catch(i){return n=i,o.webgl=!1,!1}},p=function(){var t;t=$("#"+DirectPano.pano_div_id),t.width(DirectPano.initial_width+"px").height(DirectPano.initial_height+"px"),f=new THREE.Scene,g=$("<canvas/>").width(128).height(128),u=s()?new THREE.WebGLRenderer:new THREE.CanvasRenderer,u.setPixelRatio(window.devicePixelRatio),t.append(u.domElement),u.setSize(t.outerWidth(),t.outerHeight()),e=new THREE.PerspectiveCamera(65,t.outerWidth()/t.outerHeight(),1,1100),e.target=new THREE.Vector3(0,0,0),$("#"+DirectPano.image_div_id).bind("touchstart click",function(){h()})},r=function(t){var n,e,r,s,l;for(_.Hotspot=void 0,n=0,r=a.length;r>n;n++)l=a[n],a[l]=null;for(e=0,s=i.length;s>e;e++)l=i[e],i[l]=null;a={},i={},o.lon=0,o.lat=0,o.stop_time=void 0,o.autoplay=!0},$(window).resize(function(){var t;t=$("#"+DirectPano.pano_div_id),d===!1?t.width(Math.min(DirectPano.initial_width,window.innerWidth)+"px").height(Math.min(DirectPano.initial_height,window.innerHeight)+"px"):t.width(window.innerWidth+"px").height(window.innerHeight+"px"),u.setSize(t.outerWidth(),t.outerHeight()),e.aspect=t.outerWidth()/t.outerHeight(),e.updateProjectionMatrix()}),p(),_.destroy=r,_.Config=o,_.camera=e,_.scene=f,_.renderer=u,_.blur_images=i,_.clear_images=a,_.texture_placeholder=g,_.raycaster=c,_.escape_fullscreen=l,t.exports=_}).call(this)}]);
